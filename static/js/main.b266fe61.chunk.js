(this["webpackJsonpjson-edit"]=this["webpackJsonpjson-edit"]||[]).push([[0],{77:function(e,t,n){e.exports=n(90)},86:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(8),o=n.n(c),i=n(9),l=n(26),u=n(59),d=n(20),s="RECEIVE_JSON",f="REQUEST_JSON",m="INCREMENT_INDEX",E="DECREMENT_INDEX",O="UPDATE_FIELD",b="UPDATE_FILENAME",p="ADD_EXPLANATION",j="SET_PROCEED";function v(){return{type:m}}function g(){return{type:E}}function h(e,t){return{type:O,field:e,value:t}}function x(e){return{type:j,proceed:e}}var y=Object(l.c)({editJSON:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!1,canProceed:!0,name:"temp_REDACTED.json",data:[{a:"Hello",b:"World",c:"!!!!"},{a:"foo",b:"bar",c:"foobar"}],index:0,explanations:[["jsonIndex","fieldName","Explanation"]]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object.assign({},e,{isLoading:!0});case s:return Object.assign({},e,{data:t.payload,isLoading:!1,index:0});case m:return Object.assign({},e,{index:e.index+1});case E:return Object.assign({},e,{index:e.index-1});case j:return Object.assign({},e,{canProceed:t.proceed});case b:return Object.assign({},e,{name:t.payload});case O:return Object.assign({},e,{data:e.data.map((function(n,a){return a===e.index&&(n[t.field]=t.value),n}))});case p:return Object.assign({},e,{explanations:[].concat(Object(d.a)(e.explanations),[[t.index,t.field,t.explanation]])});default:return e}}}),N=[u.a];n(86);var S=n(13),w=n(137),J=n(130),k=n(91),C=n(61),D=n.n(C),R=n(60),A=n.n(R),L=function(e){var t=Object(a.useState)(!1),n=Object(S.a)(t,2),r=n[0],c=n[1];function o(t){t.key===e&&c(!0)}function i(t){t.key===e&&c(!1)}return Object(a.useEffect)((function(){return window.addEventListener("keydown",o),window.addEventListener("keyup",i),function(){window.removeEventListener("keydown",o),window.removeEventListener("keyup",i)}})),r},B=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.editJSON.data.length})),n=Object(i.c)((function(e){return e.editJSON.index})),c=Object(i.c)((function(e){return e.editJSON.canProceed})),o=Object(a.useState)(!1),l=Object(S.a)(o,2),u=l[0],d=l[1],s=Object(a.useState)(!1),f=Object(S.a)(s,2),m=f[0],E=f[1],O=L("ArrowLeft"),b=L("ArrowRight");return Object(a.useEffect)((function(){d(n+1<=t-1),E(n-1>=0)}),[n,t]),Object(a.useEffect)((function(){u&&b?u&&c&&e(v()):m&&O&&m&&c&&e(g())}),[O,b,u,m]),r.a.createElement(J.a,null,r.a.createElement(k.a,{disabled:!c||n<=0,onClick:function(){return e(g())}},r.a.createElement(A.a,null)),r.a.createElement(k.a,{disabled:!c||n>=t-1,onClick:function(){return e(v())}},r.a.createElement(D.a,null)))},I=n(11),T=n(138),P=n(139),_=n(145),F=n(93),W=n(140),U=n(136),M=n(64),X=n.n(M),V=n(65),q=n.n(V),z=n(148),H=n(67),Q=n(149),$=n(63),G=n.n($),K=["Personal Contact Information","Right to privacy","Preliminary drafts, notes, or intra-agency memoranda","Personnel Records","Attorney Client Communications","Litigation records to which the BID is a party","Deliberative process"],Y=function(e){var t=e.field,n=e.hasExplanation,c=e.needsExplanation,o=e.dataIndex,l=Object(a.useState)(null),u=Object(S.a)(l,2),d=u[0],s=u[1],f=Object(i.b)();function m(e){s(null),f(function(e,t,n){return{type:p,index:e,field:t,explanation:n}}(o,t,e))}return r.a.createElement("div",null,r.a.createElement(H.a,{id:"explanation-".concat(t),anchorEl:d,keepMounted:!0,open:Boolean(d),onClose:m},K.map((function(e,t){return r.a.createElement(Q.a,{key:t,onClick:function(){return m(e)}},e)}))),r.a.createElement(z.a,{title:"Add redact explanation"},r.a.createElement(U.a,{onClick:function(e){s(e.currentTarget)},color:c?"secondary":n?"primary":void 0},r.a.createElement(G.a,null))))},Z=Object(w.a)((function(e){return{card:{maxWidth:"100%",width:600,marginLeft:"auto",marginRight:"auto",marginTop:20},container:{display:"flex",flexWrap:"wrap"},textField:{margin:e.spacing(1),width:"100%"},subTextField:{margin:e.spacing(1),marginLeft:"auto",width:"90%"},iconButton:{padding:5},divider:{height:20,margin:4},inputRoot:{padding:"2px 4px",display:"flex",alignItems:"center",width:"100%"}}})),ee=function(e){var t=e.data,n=Z(),c=Object(i.b)(),o=Object(i.c)((function(e){return e.editJSON.name})),l=Object(i.c)((function(e){return e.editJSON.index})),u=Object(i.c)((function(e){return e.editJSON.explanations})),d=Object(a.useState)({}),s=Object(S.a)(d,2),f=s[0],m=s[1],E=Object(a.useState)({}),O=Object(S.a)(E,2),b=O[0],p=O[1];function j(e,t){return!!(u||[]).find((function(n){return n[0]===t&&n[1]===e}))}return Object(a.useEffect)((function(){var e={},n={};Object.keys(t).forEach((function(t){e[t]=!0,n[t]=!1})),m(e),p(n)}),[t]),Object(a.useEffect)((function(){var e=Object.keys(b).filter((function(e){return!0===b[e]}));console.log(e);var t=e.find((function(e){return!j(e,l)}));c(x(!t))}),[b,c,j]),r.a.createElement(T.a,{className:n.card},r.a.createElement(P.a,null,r.a.createElement(F.a,{className:n.title,color:"textSecondary",gutterBottom:!0},o),r.a.createElement("form",{className:n.container,noValidate:!0,autoComplete:"off"},Object.keys(t).map((function(e,a){return r.a.createElement("div",{className:n.inputRoot,key:a},r.a.createElement(_.a,{label:e,value:t[e],onChange:function(t){return function(e,t){c(h(e,t))}(e,t.target.value)},multiline:!0,className:n.textField,inputProps:{"aria-label":e},variant:"outlined",disabled:f[e],error:b[e]&&!j(e,l)}),r.a.createElement(z.a,{title:"Redact entire field"},r.a.createElement(U.a,{className:n.iconButton,"aria-label":"redact all",onClick:function(n){return function(e,n){var a=Object.assign({},b,Object(I.a)({},n,!b[n]));p(a),c(h(n,"X".repeat(t[n].length)))}(0,e)}},r.a.createElement(X.a,null))),r.a.createElement(W.a,{className:n.divider,orientation:"vertical"}),r.a.createElement(z.a,{title:"Edit"},r.a.createElement(U.a,{className:n.iconButton,"aria-label":"directions",onClick:function(t){return function(e,t){var n=Object.assign({},f,Object(I.a)({},t,!f[t]));m(n)}(0,e)}},r.a.createElement(q.a,null))),r.a.createElement(Y,{field:e,dataIndex:l,hasExplanation:j(e,l),needsExplanation:b[e]&&!j(e,l)}))})))))},te=n(45),ne=n.n(te),ae=Object(w.a)((function(e){return{hidden:{display:"none"}}})),re=function(){var e=new FileReader,t=Object(i.b)(),n=ae();function a(n){e.onload=c;var a=n.target.files[0].name.match(/^.*(?=(\.json))/)[0]+"_REDACTED.json";t({type:b,payload:a}),e.readAsText(n.target.files[0])}function c(e){var n=JSON.parse(e.target.result).map((function(e){return ne()(e)}));t({type:s,payload:n})}return r.a.createElement("div",null,r.a.createElement("input",{type:"file",onChange:function(e){return a(e)},id:"input",className:n.hidden}),r.a.createElement(k.a,{onClick:function(){document.querySelector("#input").click()},variant:"outlined",color:"primary"},"Upload JSON"))},ce=function(){var e=Object(i.c)((function(e){return e.editJSON.data})),t=Object(i.c)((function(e){return e.editJSON.name})),n=Object(i.c)((function(e){return e.editJSON.canProceed})),c=Object(a.useState)(""),o=Object(S.a)(c,2),l=o[0],u=o[1];return Object(a.useEffect)((function(){var t=e.map((function(e){return ne.a.unflatten(e)}));u("data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t)))}),[e]),r.a.createElement(k.a,{variant:"outlined",href:l,download:t,color:"primary",disabled:!n},"Download JSON")},oe=function(){var e=Object(i.c)((function(e){return e.editJSON.explanations})),t=Object(i.c)((function(e){return e.editJSON.canProceed})),n=Object(a.useState)(""),c=Object(S.a)(n,2),o=c[0],l=c[1];return Object(a.useEffect)((function(){var t="data:text/csv;charset=utf-8,";e.forEach((function(e){var n=e.join(",");t+=n+"\n"})),l(encodeURI(t))}),[e]),r.a.createElement(k.a,{color:"primary",variant:"outlined",href:o,download:"Explanations.csv",disabled:!t},"Download Reasons")},ie=n(141),le=Object(w.a)((function(e){return{root:{maxWidth:"100%",width:400,marginLeft:"auto",marginRight:"auto",marginTop:"20px",marginBottom:"20px"},text:{fontSize:"12px",color:"grey"}}})),ue=function(){var e=le(),t=Object(i.c)((function(e){return e.editJSON.index})),n=Object(i.c)((function(e){return e.editJSON.data.length}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(ie.a,{variant:"determinate",value:(t+1)/n*100,className:e.root}),r.a.createElement("span",{className:e.text},"(",t+1," of ",n,")"))},de=n(147),se=n(142),fe=n(143),me=n(144),Ee=n(66),Oe=n.n(Ee),be=Object(w.a)((function(e){return{root:{textAlign:"end",width:700,maxWidth:"100%",marginLeft:"auto",marginRight:"auto"}}})),pe=function(){var e=Object(a.useState)(!1),t=Object(S.a)(e,2),n=t[0],c=t[1],o=be();function i(){c(!1)}return r.a.createElement("div",{className:o.root},r.a.createElement(U.a,{variant:"outlined",color:"primary",onClick:function(){c(!0)},className:o.button},r.a.createElement(Oe.a,null)),r.a.createElement(de.a,{onClose:i,open:n},r.a.createElement(se.a,{onClose:i},"Redact your JSON"),r.a.createElement(fe.a,{dividers:!0},r.a.createElement(F.a,{gutterBottom:!0},"Click the 'UPLOAD JSON' button to upload your JSON file to the web app"),r.a.createElement(F.a,{gutterBottom:!0},"Once the form loads to your json structure, click the edit or redact-all buttons to edit your new JSON."),r.a.createElement(F.a,{gutterBottom:!0},"The 'add explanation' button allows for the user to choose an explanation for the redaction that is compiled to a csv file for later download."),r.a.createElement(F.a,{gutterBottom:!0},"Once all edits are done, a redacted version of your JSON is available for download by click the 'DOWNLOAD JSON' button."),r.a.createElement(F.a,{gutterBottom:!0},"All edits are done in the browser and never sent to a server.")),r.a.createElement(me.a,null,r.a.createElement(k.a,{autoFocus:!0,onClick:i,color:"primary"},"Dismiss"))))},je=(n(89),Object(w.a)((function(e){return{fileButtons:{display:"flex",justifyContent:"center",margin:20}}})));var ve=function(){var e=je(),t=Object(i.c)((function(e){return e.editJSON.data})),n=Object(i.c)((function(e){return e.editJSON.index})),c=Object(a.useState)(),o=Object(S.a)(c,2),l=o[0],u=o[1];return Object(a.useEffect)((function(){u(t[n])}),[n,t]),r.a.createElement("div",{className:"App"},r.a.createElement(pe,null),r.a.createElement(B,null),r.a.createElement(ue,null),l&&r.a.createElement(ee,{data:l}),r.a.createElement("div",{className:e.fileButtons},r.a.createElement(re,null),r.a.createElement(ce,null),r.a.createElement(oe,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ge,he=Object(l.d)(y,ge,l.a.apply(void 0,N));o.a.render(r.a.createElement(i.a,{store:he},r.a.createElement(ve,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[77,1,2]]]);
//# sourceMappingURL=main.b266fe61.chunk.js.map